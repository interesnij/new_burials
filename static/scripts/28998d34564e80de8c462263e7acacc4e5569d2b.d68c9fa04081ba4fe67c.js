(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{ifxC:function(e,t,n){"use strict";var o=n("wx14"),a=n("o0o1"),r=n.n(a),c=n("HaE+"),i=n("1OyB"),s=n("vuIU"),l=n("JX7q"),u=n("Ji7U"),p=n("md7G"),d=n("foSv"),f=n("rePB"),m=n("q1tI"),O=n.n(m),g=n("/MKj"),b=n("OS56"),v=n.n(b),h=n("jrRI"),j=n("q7Gj"),y=n("re1l"),N=n("sOKU"),k=n("3OM0"),w=n("DCcX"),S=n("vkoW"),C=n("CaDr"),x=n("1Yj4"),R=n("y2Vs"),I=n("Hk+7"),_=n("K+LV"),T=n("ZPNs"),L=n("mm17"),E=n("l52F"),M=O.a.createElement;function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(p.a)(this,n)}}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F={placeholder:function(){return{display:"none"}},valueContainer:function(e){return q(q({},e),{},{padding:"0.75rem 1rem"})},input:function(e){return q(q({},e),{},{padding:0,margin:0,width:"auto"})},dropdownIndicator:function(){return{display:"none"}},container:function(e){return q(q({},e),{},{flexGrow:1})},control:function(e,t){return q(q({},e),{},{cursor:"pointer",borderColor:t.isFocused?"#f1995a":"#dadada",boxShadow:"none",borderRight:0,borderTopRightRadius:0,borderBottomRightRadius:0})},option:function(e,t){return q(q({},e),{},{cursor:"pointer",backgroundColor:t.isFocused||t.isSelected?"#f1995a":null})},menu:function(e){return q(q({},e),{},{width:400,maxWidth:"90vw"})}},G={nextArrow:M(L.a,null),prevArrow:M(L.b,null),slidesToShow:3,infinite:!1,responsive:[{breakpoint:992,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]},A=function(e){Object(u.a)(n,e);var t=P(n);function n(e){var o;return Object(i.a)(this,n),o=t.call(this,e),Object(f.a)(Object(l.a)(o),"toggleModal",(function(){return o.setState((function(e){return{modalOpened:!e.modalOpened}}))})),Object(f.a)(Object(l.a)(o),"openModal",Object(c.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props,n=t.country,a=t.countries,o.setState({modalOpened:!0,loading:!0}),e.next=4,T.a.get("/api/regions/".concat(a[n],"?_format=json"));case 4:c=e.sent,o.setState({loading:!1,regions:c.body});case 6:case"end":return e.stop()}}),e)})))),Object(f.a)(Object(l.a)(o),"setRegionOptions",(function(){var e=o.state,t=e.region,n=e.regions,a=o.props,r=a.onChange,c=a.setOptionsGlobal,i=n.find((function(e){return e.id===t}));r({value:"region-".concat(t)}),o.slider.slickGoTo(1);var s=[{label:i.name,value:"region-".concat(t)}];c(s),o.setState({options:s})})),Object(f.a)(Object(l.a)(o),"setDistrictOptions",(function(){var e=o.state,t=e.district,n=e.districts,a=o.props,r=a.onChange,c=a.setOptionsGlobal;r({value:"district-".concat(t)});var i=n.find((function(e){return e.id===t}));o.slider.slickGoTo(2);var s=[{label:"".concat(i.name),value:"district-".concat(t)}];c(s),o.setState({options:s})})),Object(f.a)(Object(l.a)(o),"setCemeteryOptions",(function(){var e=o.state,t=e.cemetery,n=e.cemeteries,a=o.props,r=a.onChange,c=a.setOptionsGlobal;r({value:"cemetery-".concat(t)});var i=n.find((function(e){return e.id===t})),s=[{label:"".concat(i.name),value:"cemetery-".concat(t)}];c(s),o.setState({options:s,modalOpened:!1})})),Object(f.a)(Object(l.a)(o),"changeRegion",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({region:t,loading:!0,districts:[],cemeteries:[]},o.setRegionOptions),e.next=3,T.a.get("/api/districts/".concat(t,"?_format=json"));case 3:n=e.sent,o.setState({loading:!1,districts:n.body});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(f.a)(Object(l.a)(o),"changeDistrict",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("default"!==o.props.mode){e.next=9;break}return o.setState({district:t,loading:!0,cemeteries:[]}),e.next=5,T.a.get("/api/cemeteries-by-district/".concat(t,"?_format=json"));case 5:n=e.sent,o.setState({loading:!1,cemeteries:n.body},o.setDistrictOptions),e.next=10;break;case 9:o.setState({district:t,loading:!1,cemeteries:[],modalOpened:!1},o.setDistrictOptions);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(f.a)(Object(l.a)(o),"changeCemetery",(function(e){o.setState({cemetery:e},o.setCemeteryOptions)})),Object(f.a)(Object(l.a)(o),"onFocusLocation",(function(){return o.setState({focusLocation:!0})})),Object(f.a)(Object(l.a)(o),"onBlurLocation",(function(){return o.setState({focusLocation:!1})})),Object(f.a)(Object(l.a)(o),"onInputChange",(function(e){clearTimeout(o.timeout),o.timeout=setTimeout((function(){e.length>3?o.getResults(e):o.setState({menuIsOpen:!1})}),700)})),Object(f.a)(Object(l.a)(o),"onChange",(function(e){var t=o.props,n=t.onChange,a=t.setOptionsGlobal;n(e);var r=[{label:e.label.split(", ").pop(),value:e.value}];a(r),o.setState({menuIsOpen:!1,options:r,districts:[],cemeteries:[],district:null,cemetery:null,region:null})})),Object(f.a)(Object(l.a)(o),"getResults",function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,i,s,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.props,a=n.mode,c=n.country,i=n.countries,s=i[c],!Object.keys(t).length){e.next=16;break}return e.next=5,Object(_.a)();case 5:return l=e.sent,e.prev=6,e.next=9,T.a.set("X-CSRF-Token",l).post("/api/locations/autocomplete").send({keys:t,mode:a,countryId:s});case 9:u=e.sent,o.setState({options:u.body,menuIsOpen:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}()),o.state={focusLocation:!1,options:e.locationOptions,menuIsOpen:!1,modalOpened:!1,regions:[],region:null,districts:[],district:null,cemeteries:[],cemetery:null,loading:!1},e.clearLocationOptions(),o.timeout=0,o}return Object(s.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.locationOptions,n=e.locationOptions.length;0===n&&n!==t.length&&this.setState({options:[]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.title,r=t.name,c=t.mode,i=this.state,s=i.focusLocation,l=i.options,u=i.menuIsOpen,p=i.modalOpened,d=i.loading,f=i.regions,m=i.districts,O=i.cemeteries,g=i.region,b=i.district,_=i.cemetery;return M(h.a,{className:"flex-grow-1"},M(j.a,{className:s||n||l.length?"focus flex-no-wrap flex-grow-1":"blur flex-no-wrap flex-grow-1"},M(R.a,{name:r,id:r,inputId:"".concat(r,"-input"),onBlur:this.onBlurLocation,onFocus:this.onFocusLocation,onInputChange:this.onInputChange,options:l,menuIsOpen:u,onChange:this.onChange,value:1===l.length?l[0]:null,styles:F}),M(y.a,{addonType:"append"},M(N.a,{color:"outline-primary",className:"px-3",onClick:this.openModal},M("span",{className:"mr-1"},"+"),M("u",{className:"d-none d-md-inline pl-2"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c")))),M(k.a,{for:"".concat(r,"-input")},a),M("small",null,"default"===c?'\u0412\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0430\u0434\u0431\u0438\u0449\u0430 (\u0438\u043b\u0438 \u0440\u0430\u0439\u043e\u043d\u0430/\u043e\u0431\u043b\u0430\u0441\u0442\u0438) \u043b\u0438\u0431\u043e \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "+" \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430':'\u0412\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0439\u043e\u043d\u0430/\u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043b\u0438\u0431\u043e \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "+" \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430'),M(w.a,{isOpen:p,toggle:this.toggleModal,contentClassName:"bg-white text-dark p-2",size:"xl"},M(S.a,{toggle:this.toggleModal},M("div",{className:"text-dark"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u043e\u043d","default"===c&&" \u0438 \u043a\u043b\u0430\u0434\u0431\u0438\u0449\u0435")),M(C.a,null,M(x.a,{className:"location-popup"},M(v.a,Object(o.a)({ref:function(t){e.slider=t}},G),M("div",{className:"location-col"},M("h6",null,"\u041e\u0431\u043b\u0430\u0441\u0442\u044c"),M("div",{className:"location-col__content"},f.map((function(t){return M(N.a,{key:t.id,onClick:function(){return e.changeRegion(t.id)},color:"link",className:t.id===g?"active":""},t.name)})))),M("div",{className:"location-col"},M("h6",null,"\u0420\u0430\u0439\u043e\u043d"),M("div",{className:"location-col__content"},m.map((function(t){return M(N.a,{key:t.id,onClick:function(){return e.changeDistrict(t.id)},color:"link",className:t.id===b?"active":""},t.name)})))),"default"===c&&M("div",{className:"location-col"},M("h6",null,"\u041a\u043b\u0430\u0434\u0431\u0438\u0449\u0435"),M("div",{className:"location-col__content"},O.map((function(t){return M(N.a,{key:t.id,onClick:function(){return e.changeCemetery(t.id)},color:"link",className:t.id===_?"active":""},t.name)})))))),M("div",{className:"d-flex py-3"},M(N.a,{color:"primary",onClick:this.toggleModal,className:"ml-auto"},"OK")))),d&&M(I.a,null))}}]),n}(O.a.Component);A.defaultProps={value:null,onChange:null,locationOptions:[],mode:"default"},t.a=Object(g.b)((function(e){return{locationOptions:e.formValues.locationOptions,country:e.country.country,countries:e.globalConfig.countries}}),(function(e){return{setOptionsGlobal:function(t){return e(Object(E.d)(t))},clearLocationOptions:function(){return e(Object(E.b)())}}}))(A)},l52F:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c}));var o=function(e){return{type:"SET_FIND_BURIAL_FORM_VALUES",values:e}},a=function(){return{type:"CLEAR_FIND_BURIAL_FORM_VALUES"}},r=function(e){return{type:"SET_LOCATION_OPTIONS",options:e}},c=function(){return{type:"CLEAR_LOCATION_OPTIONS"}}},q7Gj:function(e,t,n){"use strict";var o=n("ELrk"),a=n("sDqW"),r=n("q1tI"),c=n.n(r),i=n("17x9"),s=n.n(i),l=n("TSYQ"),u=n.n(l),p=n("33Jr"),d={tag:p.q,size:s.a.string,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,n=e.cssModule,r=e.tag,i=e.size,s=Object(a.a)(e,["className","cssModule","tag","size"]),l=Object(p.m)(u()(t,"input-group",i?"input-group-"+i:null),n);return c.a.createElement(r,Object(o.a)({},s,{className:l}))};f.propTypes=d,f.defaultProps={tag:"div"},t.a=f},re1l:function(e,t,n){"use strict";var o=n("ELrk"),a=n("sDqW"),r=n("q1tI"),c=n.n(r),i=n("17x9"),s=n.n(i),l=n("TSYQ"),u=n.n(l),p=n("33Jr"),d={tag:p.q,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,n=e.cssModule,r=e.tag,i=Object(a.a)(e,["className","cssModule","tag"]),s=Object(p.m)(u()(t,"input-group-text"),n);return c.a.createElement(r,Object(o.a)({},i,{className:s}))};f.propTypes=d,f.defaultProps={tag:"span"};var m=f,O={tag:p.q,addonType:s.a.oneOf(["prepend","append"]).isRequired,children:s.a.node,className:s.a.string,cssModule:s.a.object},g=function(e){var t=e.className,n=e.cssModule,r=e.tag,i=e.addonType,s=e.children,l=Object(a.a)(e,["className","cssModule","tag","addonType","children"]),d=Object(p.m)(u()(t,"input-group-"+i),n);return"string"===typeof s?c.a.createElement(r,Object(o.a)({},l,{className:d}),c.a.createElement(m,{children:s})):c.a.createElement(r,Object(o.a)({},l,{className:d,children:s}))};g.propTypes=O,g.defaultProps={tag:"div"};t.a=g}}]);