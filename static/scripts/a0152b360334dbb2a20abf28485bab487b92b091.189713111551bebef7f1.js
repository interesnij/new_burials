(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{hfBf:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("1OyB"),r=n("vuIU"),i=n("rePB"),s=n("yLiY"),a=n.n(s),u=n("ZPNs"),c=a()().publicRuntimeConfig,f=c.CLIENT_ID,p=c.CLIENT_SECRET,l=function(){function e(){var t=this;Object(o.a)(this,e),Object(i.a)(this,"refreshAuthToken",(function(e){return new Promise((function(n,o){console.log("Refreshing the access token..."),u.a.post("/oauth/token").send({grant_type:"refresh_token",refresh_token:e,client_id:f,client_secret:p}).set("Content-Type","application/x-www-form-urlencoded").unset("Authorization").then((function(e){var o=e.body;console.log("The new access token is generated."),t.accessToken=o.access_token,t.refreshToken=o.refresh_token,n({accessToken:o.access_token,expiration:new Date((new Date).getTime()+1e3*o.expires_in),refreshToken:o.refresh_token})})).catch((function(e){console.error("Could not refresh auth token."),o(e)}))}))})),this.accessToken="",this.refreshToken=""}return Object(r.a)(e,[{key:"getRequest",value:function(){return"string"===typeof this.accessToken&&this.accessToken.length?u.a.set("Authorization","Bearer ".concat(this.accessToken)):u.a.unset("Authorization"),u.a}},{key:"isLoggedIn",value:function(){return!!this.accessToken}},{key:"hasRefreshToken",value:function(){return!!this.refreshToken}}]),e}()},nfEj:function(e,t,n){(function(e){!function(t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n=n&&n.hasOwnProperty("default")?n.default:n;var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function d(e,t){return e(t={exports:{}},t.exports),t.exports}var y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function v(){}function m(){}m.resetWarningCache=v;var b=d((function(e){e.exports=function(){function e(e,t,n,o,r,i){if(i!==y){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:m,resetWarningCache:v};return n.PropTypes=n,n}()})),k="__global_unique_id__",O=function(){return l[k]=(l[k]||0)+1};function g(e){return function(){return e}}var _=function(){};_.thatReturns=g,_.thatReturnsFalse=g(!1),_.thatReturnsTrue=g(!0),_.thatReturnsNull=g(null),_.thatReturnsThis=function(){return this},_.thatReturnsArgument=function(e){return e};var j=_,w=d((function(e,t){t.__esModule=!0,i(n);var o=i(b),r=i(O);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i(j);var c=1073741823;t.default=function(e,t){var i,f,p="__create-react-context-"+(0,r.default)()+"__",l=function(e){function n(){var t,o,r,i;s(this,n);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return t=o=a(this,e.call.apply(e,[this].concat(c))),o.emitter=(r=o.props.value,i=[],{on:function(e){i.push(e)},off:function(e){i=i.filter((function(t){return t!==e}))},get:function(){return r},set:function(e,t){r=e,i.forEach((function(e){return e(r,t)}))}}),a(o,t)}return u(n,e),n.prototype.getChildContext=function(){var e;return(e={})[p]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,o=e.value,r=void 0;((i=n)===(s=o)?0!==i||1/i==1/s:i!=i&&s!=s)?r=0:(r="function"==typeof t?t(n,o):c,0!=(r|=0)&&this.emitter.set(e.value,r))}var i,s},n.prototype.render=function(){return this.props.children},n}(n.Component);l.childContextTypes=((i={})[p]=o.default.object.isRequired,i);var h=function(t){function n(){var e,o;s(this,n);for(var r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];return e=o=a(this,t.call.apply(t,[this].concat(i))),o.state={value:o.getValue()},o.onUpdate=function(e,t){0!=((0|o.observedBits)&t)&&o.setState({value:o.getValue()})},a(o,e)}return u(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?c:t},n.prototype.componentDidMount=function(){this.context[p]&&this.context[p].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?c:e},n.prototype.componentWillUnmount=function(){this.context[p]&&this.context[p].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[p]?this.context[p].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(n.Component);return h.contextTypes=((f={})[p]=o.default.object,f),{Provider:l,Consumer:h}},e.exports=t.default}));h(w);var T=h(d((function(e,t){t.__esModule=!0;var o=i(n),r=i(w);function i(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.createContext||r.default,e.exports=t.default}))),C=h(d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}}))),R=T(null),P=function(e){var t=C(e);return function(o){return n.createElement(R.Consumer,null,(function(r){if(null===r){var i="Couldn't find Yandex.Maps API in the context. "+"Make sure that <".concat(t," /> is inside <YMaps /> provider");throw new Error(i)}return n.createElement(e,a({ymaps:r},o))}))}},E=T(null),x=function(e){return function(t){return n.createElement(E.Consumer,null,(function(o){return n.createElement(e,a({parent:o},t))}))}},S={lang:"ru_RU",load:"",ns:"",mode:"release"},M={},A=function(){function e(t){r(this,e);var n=Date.now().toString(32);this.options=t,this.namespace=t.query.ns,this.onload=e.onloadCallback+"$$"+n,this.onerror=e.onerrorCallback+"$$"+n,this.api,this.promise}return s(e,[{key:"getApi",value:function(){return"undefined"!=typeof window&&this.namespace?window[this.namespace]:this.api}},{key:"setApi",value:function(e){return this.api=e}},{key:"getPromise",value:function(){return this.namespace?M[this.namespace]:this.promise}},{key:"setPromise",value:function(e){return this.namespace?M[this.namespace]=this.promise=e:this.promise=e}},{key:"load",value:function(){var t=this;if(this.getApi())return Promise.resolve(this.setApi(this.getApi()));if(this.getPromise())return this.setPromise(this.getPromise());var n=Object.assign({onload:this.onload,onerror:this.onerror},S,this.options.query),o=Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})).join("&"),r=[e.getBaseUrl(this.options.enterprise),this.options.version,"?"+o].join("/"),i=new Promise((function(e,n){window[t.onload]=function(n){delete window[t.onload],n.loadModule=t.loadModule.bind(t),n.ready((function(){return e(t.setApi(n))}))},window[t.onerror]=function(e){delete window[t.onerror],n(e)},t.fetchScript(r).catch(window[t.onerror])}));return this.setPromise(i)}},{key:"fetchScript",value:function(e){var t=this;return new Promise((function(n,o){t.script=document.createElement("script"),t.script.type="text/javascript",t.script.onload=n,t.script.onerror=o,t.script.src=e,t.script.async="async",document.head.appendChild(t.script)}))}},{key:"loadModule",value:function(e){var t=this;return new Promise((function(n,o){t.getApi().modules.require(e,(function(o){!function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t="string"==typeof t?t.split("."):t.slice();for(var r,i=e;t.length>1;)i[r=t.shift()]||(i[r]={}),i=i[r];i[t[0]]=!0===o&&i[t[0]]||n}(t.api,e,o,!0),n(o)}),o,t.getApi())}))}}]),e}();A._name="__react-yandex-maps__",A.onloadCallback="__yandex-maps-api-onload__",A.onerrorCallback="__yandex-maps-api-onerror__",A.getBaseUrl=function(e){return"https://".concat(e?"enterprise.":"","api-maps.yandex.ru")};var U=function(e){function t(e){var n;return r(this,t),(n=p(this,c(t).call(this,e))).ymaps=new A(e),n}return u(t,n.Component),s(t,[{key:"componentDidMount",value:function(){!0===this.props.preload&&this.ymaps.load()}},{key:"render",value:function(){return n.createElement(R.Provider,{value:this.ymaps},this.props.children)}}]),t}();U.defaultProps={version:"2.1",enterprise:!1,query:{lang:"ru_RU",load:"",ns:""},preload:!1};var B=function(e,t){var n={};for(var o in e)-1===t.indexOf(o)&&(n[o]=e[o]);return n};function D(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=function(i){function f(){var e;return r(this,f),(e=p(this,c(f).call(this))).state={loading:!0},e._isMounted=!1,e}return u(f,n.Component),s(f,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.ymaps.load().then((function(t){return Promise.all(o.concat(e.props.modules).map(t.loadModule)).then((function(){!0===e._isMounted&&e.setState({loading:!1},(function(){e.props.onLoad(t)}))}))})).catch((function(t){!0===e._isMounted&&e.props.onError(t)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var o=this.props.ymaps,r=this.state.loading,i=!1===t||!1===r,s=B(this.props,["onLoad","onError","modules","ymaps"]);return i&&n.createElement(e,a({ymaps:o.getApi()},s))}}]),f}();return i.defaultProps={onLoad:Function.prototype,onError:Function.prototype,modules:[]},P(i)}var N=/^on(?=[A-Z])/;function L(e){return Object.keys(e).reduce((function(t,n){if(N.test(n)){var o=n.replace(N,"").toLowerCase();t._events[o]=e[n]}else t[n]=e[n];return t}),{_events:{}})}function I(e,t,n){"function"==typeof n&&e.events.add(t,n)}function z(e,t,n){"function"==typeof n&&e.events.remove(t,n)}function W(e,t,n){Object.keys(Object.assign({},t,n)).forEach((function(o){t[o]!==n[o]&&(z(e,o,t[o]),I(e,o,n[o]))}))}var q=function(e){return"default"+e.charAt(0).toUpperCase()+e.slice(1)};function F(e,t){return void 0!==e[t]||void 0===e[q(t)]}function Z(e,t,n){return(F(e,t)?e[t]:e[q(t)])||n}var Y=function(e){function t(){var e;return r(this,t),(e=p(this,c(t).call(this))).state={instance:null},e._parentElement=null,e._getRef=function(t){e._parentElement=t},e}return u(t,n.Component),s(t,[{key:"componentDidMount",value:function(){var e=t.mountObject(this._parentElement,this.props.ymaps.Map,this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){var e=t.getParentElementSize(this.props),o=L(this.props),r=B(o,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return n.createElement(E.Provider,{value:this.state.instance},n.createElement("div",a({ref:this._getRef},e,r),this.props.children))}}],[{key:"getParentElementSize",value:function(e){var t=e.width,n=e.height,o=e.style,r=e.className;return void 0!==o||void 0!==r?Object.assign({},o&&{style:o},r&&{className:r}):{style:{width:t,height:n}}}},{key:"mountObject",value:function(e,t,n){var o=L(n),r=o.instanceRef,i=o._events,s=new t(e,Z(n,"state"),Z(n,"options"));return Object.keys(i).forEach((function(e){return I(s,e,i[e])})),"function"==typeof r&&r(s),s}},{key:"updateObject",value:function(e,t,n){var o=L(n),r=o._events,i=o.instanceRef,s=L(t),a=s._events,u=s.instanceRef;if(F(n,"state")){var c=Z(t,"state",{}),f=Z(n,"state",{});c.type!==f.type&&e.setType(f.type),c.behaviors!==f.behaviors&&(c.behaviors&&e.behaviors.disable(c.behaviors),f.behaviors&&e.behaviors.enable(f.behaviors)),c.zoom!==f.zoom&&e.setZoom(f.zoom),c.center!==f.center&&e.setCenter(f.center),f.bounds&&c.bounds!==f.bounds&&e.setBounds(f.bounds)}if(F(n,"options")){var p=Z(t,"options"),l=Z(n,"options",{});p!==l&&e.options.set(l)}Z(t,"width")===Z(n,"width")&&Z(t,"height")===Z(n,"height")||e.container.fitToViewport(),W(e,a,r),u!==i&&("function"==typeof u&&u(null),"function"==typeof i&&i(e))}},{key:"unmountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n._events;null!==e&&(Object.keys(r).forEach((function(t){return z(e,t,r[t])})),e.destroy(),"function"==typeof o&&o(null))}}]),t}();Y.defaultProps={width:320,height:240};var V=D(Y,!0,["Map"]),G=x(D(function(e){function t(){var e;return r(this,t),(e=p(this,c(t).call(this))).state={instance:null},e}return u(t,n.Component),s(t,[{key:"componentDidMount",value:function(){var e=t.mountObject(this.props.ymaps.Clusterer,this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){return n.createElement(E.Provider,{value:this.state.instance},this.props.children)}}],[{key:"mountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n._events,s=new e(Z(t,"options"));if(Object.keys(i).forEach((function(e){return I(s,e,i[e])})),r.geoObjects&&"function"==typeof r.geoObjects.add)r.geoObjects.add(s);else{if(!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount Clusterer");r.add(s)}return"function"==typeof o&&o(s),s}},{key:"updateObject",value:function(e,t,n){var o=L(n),r=o._events,i=o.instanceRef,s=L(t),a=s._events,u=s.instanceRef;if(F(n,"options")){var c=Z(t,"options"),f=Z(n,"options");c!==f&&e.options.set(f)}W(e,a,r),u!==i&&("function"==typeof u&&u(null),"function"==typeof i&&i(e))}},{key:"unmountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n._events;null!==e&&(Object.keys(i).forEach((function(t){return z(e,t,i[t])})),r.geoObjects&&"function"==typeof r.geoObjects.remove?r.geoObjects.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}(),!0,["Clusterer"])),J=x(D(function(e){function t(){var e;return r(this,t),(e=p(this,c(t).call(this))).state={instance:null},e}return u(t,n.Component),s(t,[{key:"componentDidMount",value:function(){var e=t.mountObject(this.props.ymaps.ObjectManager,this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){return null}}],[{key:"mountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n._events,s=Z(t,"options"),a=Z(t,"features"),u=Z(t,"filter"),c=Z(t,"objects"),f=Z(t,"clusters"),p=new e(s);if(p.add(a||[]),p.setFilter(u),p.objects.options.set(c),p.clusters.options.set(f),Object.keys(i).forEach((function(e){return I(p,e,i[e])})),r.geoObjects&&"function"==typeof r.geoObjects.add)r.geoObjects.add(p);else{if(!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount ObjectManager");r.add(p)}return"function"==typeof o&&o(p),p}},{key:"updateObject",value:function(e,t,n){var o=L(n),r=o._events,i=o.instanceRef,s=L(t),a=s._events,u=s.instanceRef;if(F(n,"options")){var c=Z(t,"options"),f=Z(n,"options");c!==f&&e.options.set(f)}if(F(n,"objects")){var p=Z(t,"objects"),l=Z(n,"objects");p!==l&&e.objects.options.set(l)}if(F(n,"clusters")){var h=Z(t,"clusters"),d=Z(n,"clusters");h!==d&&e.clusters.options.set(d)}if(F(n,"filter")){var y=Z(t,"filter"),v=Z(n,"filter");y!==v&&e.options.set(v)}if(F(n,"features")){var m=Z(t,"features"),b=Z(n,"features");m!==b&&(e.remove(m),e.add(b))}W(e,a,r),u!==i&&("function"==typeof u&&u(null),"function"==typeof i&&i(e))}},{key:"unmountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n._events;null!==e&&(Object.keys(i).forEach((function(t){return z(e,t,i[t])})),r.geoObjects&&"function"==typeof r.geoObjects.remove?r.geoObjects.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}(),!0,["ObjectManager"])),$=function(e){function t(){var e;return r(this,t),(e=p(this,c(t).call(this))).state={instance:null},e}return u(t,n.Component),s(t,[{key:"componentDidMount",value:function(){var e=this;this.props.ymaps.panorama.isSupported()&&t.mountObject(this.props.ymaps.panorama,this.props).then((function(t){return e.setState({instance:t})}))}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){var e=t.getParentElementSize(this.props);return n.createElement("div",a({id:"player"},e))}}],[{key:"getParentElementSize",value:function(e){var t=e.width,n=e.height,o=e.style,r=e.className;return void 0!==o||void 0!==r?Object.assign({},o&&{style:o},r&&{className:r}):{style:{width:t,height:n}}}},{key:"mountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n._events,i=Z(t,"coordinates"),s=Z(t,"options");return new Promise((function(t,n){e.locate(i).done((function(n){if(n.length>0){var i=new e.Player("player",n[0],s);"function"==typeof o&&o(i),Object.keys(r).forEach((function(e){return I(i,e,r[e])})),t(i)}}),(function(){n()}))}))}},{key:"updateObject",value:function(e,t,n){var o=L(n),r=o._events,i=o.instanceRef,s=L(t),a=s._events,u=s.instanceRef;if(F(n,"options")){var c=Z(t,"options"),f=Z(n,"options");c!==f&&e.options.set(f)}W(e,a,r),u!==i&&("function"==typeof u&&u(null),"function"==typeof i&&i(e))}},{key:"unmountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n._events;null!==e&&(Object.keys(r).forEach((function(t){return z(e,t,r[t])})),"function"==typeof o&&o(null))}}]),t}(),X=x(D($,!0,["panorama.isSupported","panorama.locate","panorama.createPlayer","panorama.Player"]));$.defaultProps={width:320,height:240};var K=function(e){function t(){var e;return r(this,t),(e=p(this,c(t).call(this))).state={instance:null},e}return u(t,n.Component),s(t,[{key:"componentDidMount",value:function(){var e=this.props,n=e.name,o=e.dangerZone,r=e.ymaps,i=t.mountObject(o&&o.modifyConstructor?o.modifyConstructor(r[n]):r[n],this.props);this.setState({instance:i})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){return null}}],[{key:"mountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n._events,s=new e(Z(t,"geometry"),Z(t,"properties"),Z(t,"options"));if(Object.keys(i).forEach((function(e){return I(s,e,i[e])})),r&&r.geoObjects&&"function"==typeof r.geoObjects.add)r.geoObjects.add(s);else{if(!r||!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount ".concat(t.name));r.add(s)}return"function"==typeof o&&o(s),s}},{key:"updateObject",value:function(e,t,n){var r=L(n),i=r._events,s=r.instanceRef,a=L(t),u=a._events,c=a.instanceRef;if(F(n,"geometry")){var f=Z(t,"geometry",{}),p=Z(n,"geometry",{});Array.isArray(p)&&p!==f?Array.isArray(p[0])&&"number"==typeof p[1]?(e.geometry.setCoordinates(p[0]),e.geometry.setRadius(p[1])):e.geometry.setCoordinates(p):"object"===o(p)&&(p.coordinates!==f.coordinates&&e.geometry.setCoordinates(p.coordinates),p.radius!==f.radius&&e.geometry.setRadius(p.radius))}if(F(n,"properties")){var l=Z(t,"properties"),h=Z(n,"properties");l!==h&&e.properties.set(h)}if(F(n,"options")){var d=Z(t,"options"),y=Z(n,"options");d!==y&&e.options.set(y)}W(e,u,i),c!==s&&("function"==typeof c&&c(null),"function"==typeof s&&s(e))}},{key:"unmountObject",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n._events;null!==e&&(Object.keys(i).forEach((function(t){return z(e,t,i[t])})),r.geoObjects&&"function"==typeof r.geoObjects.remove?r.geoObjects.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}();function H(e,t,o){return x(D((function(t){return n.createElement(K,a({name:e,dangerZone:o?{modifyConstructor:o}:void 0},t))}),!0,[e]))}b.shape({type:b.oneOf(["Point","LineString","Rectangle","Polygon","Circle"]).isRequired,coordinates:b.oneOfType([b.arrayOf(b.number),b.arrayOf(b.arrayOf(b.number)),b.arrayOf(b.arrayOf(b.arrayOf(b.number)))]).isRequired,radius:b.number});var Q=H("GeoObject",0,(function(e){var t=e;function n(e,n,o){t.call(this,{geometry:e,properties:n},o)}return n.prototype=e.prototype,n})),ee=(b.arrayOf(b.oneOfType([b.number,b.arrayOf(b.number)])),H("Circle")),te=(b.arrayOf(b.number),H("Placemark")),ne=(b.arrayOf(b.arrayOf(b.arrayOf(b.number))),H("Polygon")),oe=(b.arrayOf(b.arrayOf(b.number)),H("Polyline")),re=(b.arrayOf(b.arrayOf(b.number)),H("Rectangle")),ie=function(e){function t(){var e;return r(this,t),(e=p(this,c(t).call(this))).state={instance:null},e}return u(t,n.Component),s(t,[{key:"componentDidMount",value:function(){var e=t.mountControl(this.props.ymaps.control[this.props.name],this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateControl(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountControl(this.state.instance,this.props)}},{key:"render",value:function(){return n.createElement(E.Provider,{value:this.state.instance},this.props.children)}}],[{key:"mountControl",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n.lazy,s=n._events,a=new e({data:Z(t,"data"),options:Z(t,"options"),state:Z(t,"state"),mapTypes:Z(t,"mapTypes"),lazy:i});if(Object.keys(s).forEach((function(e){return I(a,e,s[e])})),r&&r.controls&&"function"==typeof r.controls.add)r.controls.add(a);else{if(!r||!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount ".concat(t.name));r.add(a)}return"function"==typeof o&&o(a),a}},{key:"updateControl",value:function(e,t,n){var o=L(n),r=o._events,i=o.instanceRef,s=L(t),a=s._events,u=s.instanceRef;if(F(n,"options")){var c=Z(t,"options"),f=Z(n,"options");c!==f&&e.options.set(f)}if(F(n,"data")){var p=Z(t,"data"),l=Z(n,"data");p!==l&&e.data.set(l)}if(F(n,"state")){var h=Z(t,"state"),d=Z(n,"state");h!==d&&e.state.set(d)}if(F(n,"mapTypes")){var y=Z(t,"mapTypes"),v=Z(n,"mapTypes");y!==v&&(e.removeAllMapTypes(),v.forEach((function(t){return e.addMapType(t)})))}W(e,a,r),u!==i&&("function"==typeof u&&u(null),"function"==typeof i&&i(e))}},{key:"unmountControl",value:function(e,t){var n=L(t),o=n.instanceRef,r=n.parent,i=n._events;null!==e&&(Object.keys(i).forEach((function(t){return z(e,t,i[t])})),r.controls&&"function"==typeof r.controls.remove?r.controls.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}();function se(e,t){return x(D((function(t){return n.createElement(ie,a({name:e},t))}),!0,["control.".concat(e)]))}var ae=se("Button"),ue=se("FullscreenControl"),ce=se("GeolocationControl"),fe=se("ListBox"),pe=se("ListBoxItem"),le=se("RouteButton"),he=se("RouteEditor"),de=se("RoutePanel"),ye=se("RulerControl"),ve=se("SearchControl"),me=se("TrafficControl"),be=se("TypeSelector"),ke=se("ZoomControl");t.Button=ae,t.Circle=ee,t.Clusterer=G,t.FullscreenControl=ue,t.GeoObject=Q,t.GeolocationControl=ce,t.ListBox=fe,t.ListBoxItem=pe,t.Map=V,t.ObjectManager=J,t.Panorama=X,t.Placemark=te,t.Polygon=ne,t.Polyline=oe,t.Rectangle=re,t.RouteButton=le,t.RouteEditor=he,t.RoutePanel=de,t.RulerControl=ye,t.SearchControl=ve,t.TrafficControl=me,t.TypeSelector=be,t.YMaps=U,t.ZoomControl=ke,t.withYMaps=D,Object.defineProperty(t,"__esModule",{value:!0})}(t,n("q1tI"))}).call(this,n("3r9c"))},pfDO:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("1OyB"),r=n("vuIU"),i=n("JX7q"),s=n("Ji7U"),a=n("md7G"),u=n("foSv"),c=n("rePB"),f=n("p46w"),p=n.n(f),l=n("yLiY"),h=n.n(l),d=n("hfBf"),y=n("ZPNs"),v=n("K+LV");function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(a.a)(this,n)}}var b=h()().publicRuntimeConfig,k=b.CLIENT_ID,O=b.CLIENT_SECRET,g=function(e){Object(s.a)(n,e);var t=m(n);function n(){var e;Object(o.a)(this,n),e=t.call(this),Object(c.a)(Object(i.a)(e),"login",(function(e,t){return new Promise((function(n,o){y.a.post("/oauth/token").send({grant_type:"password",client_id:k,client_secret:O,username:e,password:t,scope:["authenticated","manager"]}).set("Content-Type","application/x-www-form-urlencoded").end((function(e,t){if(e)console.error("Auth error:",e),t&&t.body&&t.body.message&&(console.log("Response:",t.body.message),o(t.body.message)),o(new Error("Could not authenticate user. Please, try again."));else{console.log("Successful login.");var r=t.body;p.a.set("accessToken",r.access_token,{expires:new Date((new Date).getTime()+1e3*r.expires_in)}),p.a.set("refreshToken",r.refresh_token,{expires:365}),n()}}))}))})),Object(c.a)(Object(i.a)(e),"logout",(function(){return new Promise((function(t){Object(v.b)().then((function(n){y.a.post("/user/token/revoke").set("Content-Type","application/json").set("Authorization","Bearer ".concat(e.accessToken)).set("X-CSRF-TOKEN",n).end((function(n,o){n&&(console.error("Logout error:",n),o&&o.body&&o.body.message&&console.error("Response:",o)),e.accessToken="",e.refreshToken="",p.a.remove("accessToken"),p.a.remove("refreshToken"),p.a.remove("X-CSRF-Token"),t()}))}))}))}));var r=p.a.get();return e.accessToken=r&&r.accessToken?r.accessToken:"",e.refreshToken=r&&r.refreshToken?r.refreshToken:"",e}return Object(r.a)(n,[{key:"refreshAuthenticationToken",value:function(){var e=this;return new Promise((function(t,n){console.log("refreshing token for client.."),e.refreshAuthToken(e.refreshToken).then((function(n){console.log("Setting client auth cookies..."),p.a.set("accessToken",n.accessToken,{expires:n.expiration}),p.a.set("refreshToken",n.refreshToken,{expires:365}),e.accessToken=n.accessToken,e.refreshToken=n.refreshToken,t(n.accessToken)})).catch((function(e){n(e)}))}))}},{key:"getAccessToken",value:function(){var e=this;return this.accessToken?new Promise((function(t){return t(e.accessToken)})):this.refreshAuthenticationToken()}}]),n}(d.a)}}]);